---
environment:
  title: _limit
  tagDirectory: false
arguments: 
  automaticTimeStepCalculator: off
  petsclimiter_type: none
timestepper:
  name: theMainTimeStepper
  arguments:
    ts_type: rk
    ts_max_time: 1
    ts_max_steps: 5000
    ts_dt: 1.0e-06
    ts_adapt_monitor: ""
flow: !ablate::flow::ReactingCompressibleFlow
  name: flowField
  mesh: !ablate::mesh::FileMesh
    name: slabBurner
    path: SlabMotor2D.msh
    options:
      dm_refine: 3
  options:
    eulerpetscfv_type: upwind
    densityYipetscfv_type: upwind
    Tpetscfv_type: leastsquares
    velpetscfv_type: leastsquares
    yipetscfv_type: leastsquares
  parameters:
    cfl: 0.5
  eos: !ablate::eos::TChem  &eos 
    mechFile: ../mechanisms/grimech30.mech.dat
    thermoFile: ../mechanisms/grimech30.thermo.dat
  transport: !ablate::eos::transport::Sutherland
    eos: *eos
  fluxCalculator: !ablate::flow::fluxCalculator::AusmpUp
    mInf: .3 
  initialization:
    - !ablate::flow::fieldFunctions::Euler
      &eulerFlowFieldState
      state: &flowFieldState
        eos: *eos
        temperature: 
          !ablate::mathFunctions::LinearTable
          file: initConditionsEquilibrium.csv
          independent: "s"
          dependent: ["T"]
          mappingFunction: &mappingFunction  "sqrt((x-.01)^2 + (y-.01)^2) > 0.0085 ? 0.0 : 0.0" 
        pressure: 101325
        velocity: "0.0, 0.0"
        massFractions:
          fieldName: massFractions
          field:
            !ablate::mathFunctions::LinearTable
            file: initConditionsEquilibrium.csv
            independent: "s"
            dependent: ['H2', 'H', 'O', 'O2', 'OH', 'H2O', 'HO2', 'H2O2', 'C', 'CH', 'CH2', 'CH2(S)', 'CH3', 'CH4', 'CO', 'CO2', 'HCO', 'CH2O', 'CH2OH', 'CH3O', 'CH3OH', 'C2H', 'C2H2', 'C2H3', 'C2H4', 'C2H5', 'C2H6', 'HCCO', 'CH2CO', 'HCCOH', 'N', 'NH', 'NH2', 'NH3', 'NNH', 'NO', 'NO2', 'N2O', 'HNO', 'CN', 'HCN', 'H2CN', 'HCNN', 'HCNO', 'HOCN', 'HNCO', 'NCO', 'N2', 'AR', 'C3H7', 'C3H8', 'CH2CHO', 'CH3CHO']
            mappingFunction: *mappingFunction 
    - !ablate::flow::fieldFunctions::DensityMassFractions
      &densityYiFlowFieldState
      state: *flowFieldState       
  boundaryConditions:
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: euler
     boundaryName: "euler walls"
     labelIds: [12, 15, 16]
     boundaryValue: !ablate::flow::fieldFunctions::Euler
      state:
        &wallFlowFieldState
        eos: *eos
        temperature: 300.0
        pressure: 101325
        velocity: "0.0, 0.0"
        massFractions: !ablate::flow::fieldFunctions::MassFractions
          eos: *eos
          values: 
            - fieldName: N2
              field: 0.769306931
            - fieldName: O2
              field: 0.230693069
   - !ablate::flow::boundaryConditions::ZeroGradientGhost
     fieldName: densityYi
     boundaryName: "densityYi walls"
     labelIds: [12, 15, 16]
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: euler
     boundaryName: "euler inlet"
     labelIds: [9]
     boundaryValue: !ablate::flow::fieldFunctions::Euler
       state: &inletFieldState
         eos: *eos
         temperature: 300.0
         pressure: 101325
         velocity: "5.0, 0.0"
         massFractions: !ablate::flow::fieldFunctions::MassFractions
           eos: *eos
           values: 
             - fieldName: N2
               field: 0.769306931
             - fieldName: O2
               field: 0.230693069
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: densityYi
     boundaryName: "densityYi inlet"
     labelIds: [9]
     boundaryValue: !ablate::flow::fieldFunctions::DensityMassFractions
       state: *inletFieldState
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: euler
     boundaryName: "euler outlet"
     labelIds: [10]
     boundaryValue: !ablate::flow::fieldFunctions::Euler
       state: &outletFieldState
         eos: *eos
         temperature: 300.0
         pressure: 101325
         velocity: "5.69410, 0.0"
         massFractions: !ablate::flow::fieldFunctions::MassFractions
           eos: *eos
           values: 
             - fieldName: N2
               field: 0.769306931
             - fieldName: O2
               field: 0.230693069
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: densityYi
     boundaryName: "densityYi outlet"
     labelIds: [10]
     boundaryValue: !ablate::flow::fieldFunctions::DensityMassFractions
       state: *outletFieldState
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: euler
     boundaryName: "slab blowing euler"
     labelIds: [14]
     boundaryValue: !ablate::flow::fieldFunctions::Euler
       state: &slabBlowingState
         eos: *eos
         temperature: 1500.0
         pressure: 101325
         velocity: "-5.0, 5.0"
         massFractions: !ablate::flow::fieldFunctions::MassFractions
           eos: *eos
           values: 
             - fieldName: CH4
               field: 1.0
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: densityYi
     boundaryName: "slab blowing densityYi"
     labelIds: [14]
     boundaryValue: !ablate::flow::fieldFunctions::DensityMassFractions
       state: *slabBlowingState
 
  monitors:
    - !ablate::monitors::TimeStepMonitor
      interval: 500