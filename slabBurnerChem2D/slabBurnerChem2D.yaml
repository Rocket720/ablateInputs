---
environment:
  title: slabBurnerChem2D
  tagDirectory: true
arguments: 
  petsclimiter_type: none
  automaticTimeStepCalculator: off
timestepper:
  name: theMainTimeStepper
  arguments:
    ts_type: rk
#    ts_adapt_type: none
    ts_max_time: 1
    ts_dt: 1E-6
flow: !ablate::flow::ReactingCompressibleFlow
  name: flowField
  mesh: !ablate::mesh::FileMesh
    name: slabBurner
#    path: https://raw.githubusercontent.com/mmcgurn/ablateInputs/main/slabBurner2D/SlabMotor2D.msh
    path: https://raw.githubusercontent.com/mmcgurn/ablateInputs/main/slabBurnerChem2D/SlabMotorHot2D.msh
    options:
      dm_refine: 5
  options:
    Tpetscfv_type: leastsquares
    velpetscfv_type: leastsquares
  parameters:
    cfl: 0.5
    k: 0.0541
    mu: 0.00001716
  fluxCalculator: !ablate::flow::fluxCalculator::AusmpUp
    mInf: .3 
  initialization:
    - fieldName: "euler" #for euler all components are in a single field
      solutionField:
        formula: >-
          1.0,
          -84602.3,
          0.0,
          0.0
    - fieldName: "densityYi" 
      solutionField: #O2,H2O,CH4,CO,CO2,N2
        formula: .2315,0,0.0,0,0,0.7685
  boundaryConditions:
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: euler
      boundaryName: "euler walls"
      labelIds: [12, 15, 16]
      boundaryValue:
        formula: 1.0,-84602.3 ,0, 0
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: densityYi
      boundaryName: "densityYi walls"
      labelIds: [9, 10, 12, 15, 16]
      boundaryValue:
        formula: .2315,0,0.0,0,0,0.7685
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: euler
      boundaryName: "inlet"
      labelIds: [9]
      boundaryValue:
        formula: 1.0,-84402.3,20, 0  
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: euler
      boundaryName: "outlet"
      labelIds: [10]
      boundaryValue:
        formula: 1.0,-84314.3,24.1596325, 0   
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: euler
      boundaryName: "glowplug"
      labelIds: [17]
      boundaryValue: # 2000K, same pressure
        formula:  0.075, 256486 ,0, 0   
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: densityYi
      boundaryName: "glowplug yi"
      labelIds: [17]
      boundaryValue:
        formula:  0.075*0.2315,0,0.0,0,0, 0.075*0.7685
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: euler
      boundaryName: "slabBlowing euler"
      labelIds: [14]
      boundaryValue:
        formula: 1.0,-364967,-5, 5   
    - !ablate::flow::boundaryConditions::EssentialGhost
      fieldName: densityYi
      boundaryName: "slabBlowing massfrac"
      labelIds: [14]
      boundaryValue: #O2,H2O,CH4,CO,CO2,N2
        formula: 0.0,0,1.0,0,0,0.0
 
  monitors:
    - !ablate::monitors::TimeStepMonitor
    - !ablate::monitors::Hdf5Monitor
      interval: 1000
# The chemkin files are from https://www.cerfacs.fr/cantera/mechanisms/meth.php#san 
# Another 2 step mechanism : 2S_CH4_CM2
  eos: !ablate::eos::TChem
    mechFile: https://raw.githubusercontent.com/mmcgurn/ablateInputs/main/slabBurnerChem2D/mech.2S_CH4_CM2.dat
    thermoFile: https://raw.githubusercontent.com/mmcgurn/ablateInputs/main/slabBurnerChem2D/thermo.2S_CH4_CM2.dat
