---
environment:
  title: _limit
  tagDirectory: false
arguments: 
  automaticTimeStepCalculator: off
  petsclimiter_type: none
  dm_plex_separate_marker: ""
timestepper:
  name: theMainTimeStepper
  arguments:
    ts_type: rk
    ts_max_time: 1
    ts_max_steps: 250
    ts_dt: 1.0e-06
    ts_adapt_monitor: ""
flow: !ablate::flow::ReactingCompressibleFlow
  name: flowField
  mesh: !ablate::mesh::BoxMesh
    name: simpleBoxField
    faces: [ 50, 50, 50]
    lower: [ -.01, -.01, -.01]
    upper: [0.01, 0.01, 0.01]
    options:
      dm_refine: 0
  options:
    eulerpetscfv_type: upwind
    densityYipetscfv_type: upwind
    Tpetscfv_type: leastsquares
    velpetscfv_type: leastsquares
    yipetscfv_type: leastsquares
  parameters:
    cfl: 0.5
  eos: !ablate::eos::TChem  &eos 
    mechFile: ../mechanisms/grimech30.mech.dat
    thermoFile: ../mechanisms/grimech30.thermo.dat
  transport: !ablate::eos::transport::Sutherland
    eos: *eos
  fluxCalculator: !ablate::flow::fluxCalculator::AusmpUp
    mInf: .3 
  initialization:
    - !ablate::flow::fieldFunctions::Euler
      &eulerFlowFieldState
      state: &flowFieldState
        eos: *eos
        temperature: "sqrt(x^2 + y^2 + z^2) < .005 ? 2225.5245834769867 : 300.0"
        pressure: 101325
        velocity: "0.0, 0.0, 0.0"
        massFractions: !ablate::flow::fieldFunctions::MassFractions
          eos: *eos
          values: 
            - fieldName: N2
              field: "sqrt(x^2 + y^2 + z^2) < .005 ? 0.742533316 : 0.7246721 "
            - fieldName: O2
              field: "sqrt(x^2 + y^2 + z^2) < .005 ? 0.0 : 0.22014124"
            - fieldName: CH4
              field:  "sqrt(x^2 + y^2 + z^2) < .005 ? 0.0 : 0.05518667" 
            - fieldName: H2O
              field:  "sqrt(x^2 + y^2 + z^2) < .005 ? 0.120500265 : 0.0" 
            - fieldName: CO2
              field:  "sqrt(x^2 + y^2 + z^2) < .005 ? 0.136966419 : 0.0" 
    - !ablate::flow::fieldFunctions::DensityMassFractions
      &densityYiFlowFieldState
      state: *flowFieldState       
  boundaryConditions:
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: euler
     boundaryName: "euler walls"
     labelIds: [1, 2, 3, 4, 5, 6]
     boundaryValue: !ablate::flow::fieldFunctions::Euler
      state:
        &wallFlowFieldState
        eos: *eos
        temperature: 300.0
        pressure: 101325
        velocity: "0.0, 0.0, 0.0"
        massFractions: !ablate::flow::fieldFunctions::MassFractions
          eos: *eos
          values: 
            - fieldName: N2
              field: 0.769306931
            - fieldName: O2
              field: 0.230693069
   - !ablate::flow::boundaryConditions::EssentialGhost
     fieldName: densityYi
     boundaryName: "densityYi  walls"
     labelIds: [1, 2, 3, 4, 5, 6]
     boundaryValue: !ablate::flow::fieldFunctions::DensityMassFractions
       state: *wallFlowFieldState  
 
 
  monitors:
    - !ablate::monitors::TimeStepMonitor
      interval: 50